//
// Generated by JSON2Apex http://json2apex.herokuapp.com/
//

@IsTest
public class SpecialServiceRequestTest {
  static testMethod void testCreateSpecialServiceRequest() {
    String json =
      '{ ' +
      '  \"formData\": {' +
      '    \"bookingReference\": \"AH-12345\",' +
      '    \"email\": \"example@example.com\",' +
      '    \"phone\": \"000000000000\",' +
      '    \"firstName\": \"test\",' +
      '    \"lastName\": \"test1\",' +
      '   \"type\": \"Special Baggage\",' +
      '    \"passengerNeedingAssistance\": \"we need assitence\",' +
      '    \"typeOfSpecialAssistance\": \"Hearing disability\",' +
      '    \"typeOfServiceAnimal\": \"Dog\",' +
      '   \"numberOfSpecialBaggage\": 2,' +
      '    \"typeOfSpecialBaggage\": \"It is 20 kg\",' +
      '    \"bringsOwnMobilityDevice\": true,' +
      '    \"mobilityDeviceType\": \"Dry Battery Wheelchair (WCBD)\",' +
      '   \"mobilityDeviceDimensions\": \"22.0*23\"' +
      '   },' +
      '  \"metaData\": {' +
      '    \"siteUrl\": \"sas.se\"' +
      '  }' +
      '}';
    Test.startTest();
    Test.setMock(
      HttpCalloutMock.class,
      new TEDSBookingSingleAndFlightSuccessMock()
    );
    RestRequest request = new RestRequest();
    request.requestUri = '/services/apexrest/SpecialServiceForm';
    request.httpMethod = 'POST';
    RestContext.request = request;
    SpecialServiceJSON2Apex obj = SpecialServiceJSON2Apex.parse(json);
    String caseId = SpecialServiceRequestForm.specialServiceForm(obj);
    Test.StopTest();
    System.assertEquals('500', caseId.substring(0, 3));
  }
}
